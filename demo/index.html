<!-- parent.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parent</title>
    <script type="module">
      import * as Comlink from 'https://unpkg.com/comlink/dist/esm/comlink.mjs';

      const iframe = document.getElementById('jupyterlab');

      const childWindow = iframe.contentWindow;

      const endpoint = Comlink.windowEndpoint(childWindow);
      const commandBridge = Comlink.wrap(endpoint);

      // For demo purposes for now, and to make it easier to test the commands
      // via the dev tools
      window.commandBridge = commandBridge;

      // Test getting the list of commands
      setTimeout(async () => {
        const result = await commandBridge.listCommands();
        console.log('List of commands:', result);
      }, 2000);
    </script>
  </head>
  <body>
    <h1>Parent Page</h1>
    <iframe
      id="jupyterlab"
      src="http://localhost:8888"
      sandbox="allow-scripts allow-same-origin"
      style="width: 100%; height: 100vh"
    ></iframe>
  </body>
</html>
